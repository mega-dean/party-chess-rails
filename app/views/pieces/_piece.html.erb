<%
transform_style = get_translate(piece.player.game, piece.square)
%>

<% if piece.player.id == player&.id %>
  <div id="piece-<%= piece.id %>"
       class="piece-container current-player"
       data-controller="piece"
       data-piece-id-value="<%= piece.id %>"
       data-piece-kind-value="<%= piece.kind %>"
       data-piece-selected-id-value="<%= selected_piece&.id %>"
       data-piece-x-value="<%= x %>"
       data-piece-y-value="<%= y %>"
       data-piece-board-x-value="<%= board_x %>"
       data-piece-board-y-value="<%= board_y %>"
       style="<%= transform_style %>"
       data-action="click->piece#selectPiece piece:deselect-other-pieces@window->piece#deselect"
  >
    <%= image_tag("#{piece.player.color}-#{piece.kind}", class: 'piece') %>
  </div>
<% else %>
  <div id="piece-<%= piece.id %>"
       class="piece-container"
       data-piece-board-x-value="<%= board_x %>"
       data-piece-board-y-value="<%= board_y %>"
       style="<%= transform_style %>">
    <%= image_tag("#{piece.player.color}-#{piece.kind}", class: 'piece') %>
  </div>
<% end %>
